{"is_source_file": true, "format": "Python", "description": "This file contains integration-like tests for OAuth flow endpoints of a FastAPI application, using the TestClient from fastapi.testclient and pytest framework. It tests OAuth initiation, callback, and token persistence functionalities.", "external_files": ["src.api.main"], "external_methods": ["fastapi.testclient.TestClient", "pytest.fixture", "pytest", "src.api.main.app"], "published": [], "classes": [], "methods": [{"name": "client()", "description": "Fixture that creates and provides a TestClient instance for testing the FastAPI app.", "scope": "", "scopeKind": ""}, {"name": "test_oauth_init_returns_auth_data(client)", "description": "Tests the OAuth initiation endpoint to ensure it returns correct authentication data.", "scope": "", "scopeKind": ""}, {"name": "test_oauth_callback_returns_connection_id(client)", "description": "Tests the OAuth callback endpoint to verify it returns the correct connection ID and status.", "scope": "", "scopeKind": ""}, {"name": "test_persist_token_monkeypatched(client, monkeypatch)", "description": "Tests token persistence functionality, monkeypatching the store_token method to avoid database interactions.", "scope": "", "scopeKind": ""}, {"name": "fake_store_token(connection_id, token, expires_at)", "scope": "test_persist_token_monkeypatched", "scopeKind": "function", "description": "unavailable"}], "calls": ["TestClient(app).post", "resp.json()", "monkeypatch.setattr"], "search-terms": ["OAuth flow tests", "FastAPI TestClient", "pytest fixture", "OAuth callback", "token persistence"], "state": 2, "file_id": 43, "knowledge_revision": 111, "git_revision": "", "ctags": [{"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143970/unified_connector_backend/tests/test_oauth.py", "pattern": "/^def client():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fake_store_token", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143970/unified_connector_backend/tests/test_oauth.py", "pattern": "/^    async def fake_store_token(connection_id, token, expires_at):$/", "file": true, "language": "Python", "kind": "function", "signature": "(connection_id, token, expires_at)", "scope": "test_persist_token_monkeypatched", "scopeKind": "function"}, {"_type": "tag", "name": "test_oauth_callback_returns_connection_id", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143970/unified_connector_backend/tests/test_oauth.py", "pattern": "/^def test_oauth_callback_returns_connection_id(client):$/", "language": "Python", "kind": "function", "signature": "(client)"}, {"_type": "tag", "name": "test_oauth_init_returns_auth_data", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143970/unified_connector_backend/tests/test_oauth.py", "pattern": "/^def test_oauth_init_returns_auth_data(client):$/", "language": "Python", "kind": "function", "signature": "(client)"}, {"_type": "tag", "name": "test_persist_token_monkeypatched", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143970/unified_connector_backend/tests/test_oauth.py", "pattern": "/^def test_persist_token_monkeypatched(client, monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(client, monkeypatch)"}], "hash": "1905482e646f870d99c17470c7c0bf57", "format-version": 4, "code-base-name": "unified_connector_backend", "filename": "unified_connector_backend/tests/test_oauth.py", "revision_history": [{"111": ""}]}